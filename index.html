<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoxCraft Launcher | Minecraft Bedrock Edition</title>
    <link rel="icon" type="image/x-icon" href="resources/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            background-color: #0f0f0f;
            color: #e0e0e0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        /* --- Estilos del Loader Minecraft Style MEJORADO --- */
        #loader-wrapper {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #121212 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .loader-logo {
            width: 100px;
            height: 100px;
            margin-bottom: 2.5rem;
            animation: pulse 1.8s infinite ease-in-out;
            filter: drop-shadow(0 0 10px rgba(74, 222, 128, 0.3));
        }

        .minecraft-loader-container {
            position: relative;
            width: 300px;
            margin-top: 1rem;
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background: #1a1a1a;
            border: 3px solid #2a2a2a;
            border-radius: 6px;
            padding: 2px;
            position: relative;
            overflow: hidden;
        }

        .progress-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(74, 222, 128, 0.1) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite linear;
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #16a34a, #4ade80, #22c55e);
            border-radius: 4px;
            box-shadow: 
                0 0 20px rgba(74, 222, 128, 0.5),
                inset 0 0 10px rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
            transition: width 0.4s ease;
        }

        .loading-text {
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            color: #4ade80;
            letter-spacing: 2px;
            font-size: 0.85rem;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
            position: relative;
        }

        .loading-text::after {
            content: '...';
            animation: dots 1.5s infinite steps(4, end);
        }

        .chunk-counter {
            position: absolute;
            top: -25px;
            right: 0;
            font-family: monospace;
            font-size: 0.7rem;
            color: #888;
        }

        @keyframes pulse {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.08) rotate(2deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* --- Estilos de la Web --- */
        .bc-gradient {
            background: linear-gradient(135deg, #4ade80 0%, #16a34a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .glass {
            background: rgba(20, 20, 20, 0.85);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px -10px rgba(74, 222, 128, 0.4);
        }

        #modal {
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
        }

        #modal.active {
            display: flex;
            opacity: 1;
        }

        /* --- Carrusel Moderno con Lista Infinita --- */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 20px;
            background: rgba(20, 20, 20, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem 1rem;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            gap: 2rem;
            padding: 1rem;
            will-change: transform;
        }

        /* Estilo para slide individual - siempre centrada visualmente */
        .carousel-slide {
            flex: 0 0 auto;
            width: 300px;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            transform-style: preserve-3d;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.05);
            cursor: pointer;
            opacity: 0.6;
            transform: scale(0.9);
        }

        /* Slide activa - centrada y destacada */
        .carousel-slide.active {
            opacity: 1;
            transform: scale(1);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.7),
                0 0 0 2px rgba(74, 222, 128, 0.6),
                0 0 30px rgba(74, 222, 128, 0.3);
            z-index: 10;
        }

        /* Slides adyacentes a la activa */
        .carousel-slide.adjacent {
            opacity: 0.8;
            transform: scale(0.95);
        }

        .carousel-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }

        .carousel-slide.active .carousel-image {
            transform: scale(1.02);
            filter: brightness(1.05);
        }

        .carousel-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 1.5rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .carousel-slide.active .carousel-caption {
            transform: translateY(0);
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.95));
        }

        .carousel-slide:hover .carousel-caption {
            transform: translateY(0);
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(74, 222, 128, 0.3);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 30;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .carousel-nav:hover {
            background: rgba(74, 222, 128, 0.2);
            border-color: #4ade80;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-nav.prev {
            left: 20px;
        }

        .carousel-nav.next {
            right: 20px;
        }

        /* Indicadores de posición - siempre visible */
        .carousel-position {
            position: absolute;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 30;
            white-space: nowrap;
        }

        .carousel-position #current-slide {
            color: #4ade80;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(74, 222, 128, 0.5);
        }

        /* Contenedor para centrar el carrusel */
        .carousel-center-helper {
            display: flex;
            justify-content: center;
            width: 100%;
        }

        /* --- Modal de Imagen Expandida --- */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .image-modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content-wrapper {
            position: relative;
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .expanded-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            cursor: zoom-in;
            transition: transform 0.3s ease;
        }

        .expanded-image.zoomed {
            cursor: zoom-out;
            transform: scale(1.5);
        }

        .modal-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1001;
        }

        .modal-btn {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            backdrop-filter: blur(10px);
        }

        .modal-btn:hover {
            background: rgba(74, 222, 128, 0.3);
            border-color: #4ade80;
            transform: scale(1.1);
        }

        .image-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .image-counter #modal-current {
            color: #4ade80;
            font-weight: bold;
        }

        /* Animación de entrada de contenido */
        .content-fade {
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease-out;
        }

        .content-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Estilos para opciones no disponibles */
        .option-disabled {
            position: relative;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .option-disabled::after {
            content: 'PRÓXIMAMENTE';
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            font-size: 0.6rem;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 10px;
            transform: rotate(15deg);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .carousel-slide {
                width: 280px;
            }
            
            .carousel-image {
                height: 280px;
            }
        }

        @media (max-width: 768px) {
            .loader-logo {
                width: 80px;
                height: 80px;
            }
            
            .minecraft-loader-container {
                width: 250px;
            }
            
            h1 {
                font-size: 3.5rem !important;
            }
            
            .modal-content {
                padding: 1.5rem !important;
                border-radius: 2rem !important;
            }
            
            .mobile-stack {
                flex-direction: column;
                gap: 1.5rem !important;
            }
            
            .mobile-text-center {
                text-align: center;
            }
            
            .mobile-padding {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            /* Carrusel móvil */
            .carousel-slide {
                width: 250px;
            }

            .carousel-image {
                height: 250px;
            }

            .carousel-nav {
                width: 40px;
                height: 40px;
                font-size: 0.8rem;
            }

            .carousel-nav.prev {
                left: 10px;
            }

            .carousel-nav.next {
                right: 10px;
            }

            /* Ajustes para modal en móvil */
            .modal-content-wrapper {
                width: 95%;
                height: 85%;
            }

            .modal-btn {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }

            .image-counter {
                bottom: 10px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2.8rem !important;
            }
            
            .modal-content {
                max-width: 95% !important;
            }

            .carousel-slide {
                width: 220px;
            }

            .carousel-image {
                height: 220px;
            }

            .carousel-nav {
                width: 35px;
                height: 35px;
            }

            .carousel-position {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
        }
    </style>
</head>
<body>

    <div id="loader-wrapper">
        <img src="resources/logo.png" alt="Logo" class="loader-logo">
        <div class="minecraft-loader-container">
            <div class="chunk-counter">Chunks: 0/256</div>
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
        </div>
        <div class="loading-text">Cargando recursos</div>
    </div>

    <nav class="fixed w-full z-50 glass px-4 md:px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <img src="resources/logo.png" alt="BoxCraft Logo" class="w-10 h-10 object-contain rounded-lg">
            <span class="text-xl font-extrabold tracking-tight hidden md:block">BoxCraft <span class="text-green-500">Launcher</span></span>
        </div>
        
        <div class="flex gap-2 md:gap-4">
            <a href="https://github.com/lxGNU/BoxCraft-Launcher" class="px-4 md:px-5 py-2 rounded-xl border border-white/10 hover:border-green-500 hover:text-green-500 transition-all text-sm font-semibold bg-white/5">
                <i class="fab fa-github mr-2"></i><span class="hidden sm:inline">Código Fuente</span>
            </a>
            <a href="docs.html" class="px-4 md:px-5 py-2 rounded-xl bg-green-500 text-black hover:bg-green-400 transition-all text-sm font-bold shadow-lg shadow-green-500/20">
                <i class="fas fa-book mr-2"></i><span class="hidden sm:inline">Documentación</span>
            </a>
        </div>
    </nav>

    <main id="main-content" class="content-fade relative pt-28 md:pt-32 pb-16 md:pb-20 px-4 md:px-6 flex flex-col items-center justify-center min-h-screen text-center mobile-padding">
        <div class="absolute top-40 left-1/2 -translate-x-1/2 w-full md:w-[600px] h-[400px] md:h-[600px] bg-green-500/5 blur-[100px] md:blur-[150px] rounded-full -z-10"></div>
        
        <h1 class="text-5xl sm:text-6xl md:text-8xl font-extrabold mb-6 md:mb-8 tracking-tighter">
            BoxCraft <br><span class="bc-gradient">Launcher</span>
        </h1>
        
        <p class="text-gray-400 text-base md:text-xl max-w-2xl mb-8 md:mb-12 leading-relaxed mobile-text-center">
            La forma más moderna y eficiente de ejecutar <span class="text-white font-semibold">Minecraft: Bedrock Edition</span> en tu distribución Linux favorita.
        </p>

        <button onclick="toggleModal()" class="btn-hover bg-white text-black px-8 md:px-12 py-4 md:py-5 rounded-2xl font-black text-lg md:text-xl flex items-center gap-4 hover:bg-green-500 transition-colors group mx-4">
            <i class="fas fa-download"></i> 
            <span>Descargar Ahora</span>
        </button>

        <div class="mt-12 md:mt-16 flex flex-col sm:flex-row gap-4 sm:gap-8 text-gray-500 text-sm font-mono uppercase tracking-widest mobile-stack">
            <span>Versión 1.0.0</span>
            <span class="hidden sm:inline">•</span>
            <span>GPLv3 License</span>
            <span class="hidden sm:inline">•</span>
            <span>Linux Nativo</span>
        </div>
    </main>

    <!-- Sección de Galería -->
    <section class="py-20 px-4 md:px-6 bg-gradient-to-b from-black/0 to-gray-900/20">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-4">
                <span class="bc-gradient">Capturas</span> del Launcher
            </h2>
            <p class="text-gray-400 text-center max-w-2xl mx-auto mb-12">
                Haz clic en cualquier imagen para expandirla y explorar los detalles
            </p>
            
            <div class="carousel-container">
                <div class="carousel-position">
                    <span id="current-slide">1</span> / <span id="total-slides">4</span>
                </div>
                
                <div class="carousel-nav prev" onclick="prevSlide()">
                    <i class="fas fa-chevron-left"></i>
                </div>
                
                <div class="carousel-center-helper">
                    <div class="carousel-track" id="carousel-track">
                        <!-- Las slides se generan dinámicamente con JavaScript -->
                    </div>
                </div>
                
                <div class="carousel-nav next" onclick="nextSlide()">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Imagen Expandida -->
    <div class="image-modal" id="image-modal">
        <div class="modal-content-wrapper">
            <div class="modal-controls">
                <button class="modal-btn" onclick="zoomImage()" title="Zoom">
                    <i class="fas fa-search-plus" id="zoom-icon"></i>
                </button>
                <button class="modal-btn" onclick="closeImageModal()" title="Cerrar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <img id="expanded-image" class="expanded-image" src="" alt="Imagen expandida">
            
            <div class="image-counter">
                <span id="modal-current">1</span> / <span id="modal-total">4</span>
            </div>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 z-[100] items-center justify-center bg-black/90 backdrop-blur-md p-4 md:p-6">
        <div class="modal-content bg-[#1a1a1a] border border-white/10 w-full max-w-md rounded-3xl md:rounded-[2.5rem] p-6 md:p-10 relative shadow-2xl">
            <button onclick="toggleModal()" class="absolute top-4 md:top-6 right-4 md:right-6 text-gray-500 hover:text-white text-2xl md:text-3xl">&times;</button>
            
            <h2 class="text-2xl md:text-3xl font-bold mb-3">Elige tu versión</h2>
            <p class="text-gray-400 mb-6 md:mb-8">Descarga el instalador optimizado para tu sistema.</p>
            
            <div class="space-y-4">
                <!-- DEB Package con logo de Deepin -->
                <a href="https://github.com/lxGNU/BoxCraft-Launcher/releases/download/v1.0.0/boxcraft-launcher_1.0.0_amd64.deb" class="flex items-center justify-between p-4 md:p-5 bg-[#0ea5e9]/10 border border-blue-500/20 rounded-2xl hover:bg-[#0ea5e9]/20 transition-all group">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center text-white">
                            <i class="fab fa-linux text-xl"></i>
                        </div>
                        <div>
                            <span class="font-bold text-blue-400 text-lg">Paquete .DEB</span>
                            <p class="text-xs text-gray-400">(Debian/Ubuntu/Deepin)</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-blue-500 group-hover:translate-x-1 transition-transform"></i>
                </a>
                
                <!-- Arch Linux - NO DISPONIBLE -->
                <div class="option-disabled flex items-center justify-between p-4 md:p-5 bg-[#9333ea]/10 border border-purple-500/20 rounded-2xl transition-all">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-purple-400 rounded-lg flex items-center justify-center text-white">
                            <i class="fas fa-archway text-xl"></i>
                        </div>
                        <div>
                            <span class="font-bold text-purple-400 text-lg">Arch (AUR)</span>
                            <p class="text-xs text-gray-400">Próximamente disponible</p>
                        </div>
                    </div>
                    <i class="fas fa-lock text-purple-500/50"></i>
                </div>

                <!-- Flatpak - NO DISPONIBLE -->
                <div class="option-disabled flex items-center justify-between p-4 md:p-5 bg-[#ea580c]/10 border border-orange-500/20 rounded-2xl transition-all">
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-400 rounded-lg flex items-center justify-center text-white">
                            <i class="fas fa-box text-xl"></i>
                        </div>
                        <div>
                            <span class="font-bold text-orange-400 text-lg">Flatpak</span>
                            <p class="text-xs text-gray-400">En desarrollo</p>
                        </div>
                    </div>
                    <i class="fas fa-lock text-orange-500/50"></i>
                </div>
            </div>
            
            <div class="mt-8 p-4 bg-gray-900/50 rounded-xl border border-gray-800">
                <p class="text-sm text-gray-400 text-center">
                    <i class="fas fa-info-circle mr-2 text-green-500"></i>
                    Actualmente solo disponible para distribuciones basadas en Debian
                </p>
            </div>
        </div>
    </div>

    <footer class="py-8 md:py-12 px-4 md:px-6 border-t border-white/5 text-center bg-black/50">
        <p class="text-gray-500 text-sm mb-3">© 2026 BoxCraft Launcher - Software de código abierto - GPLv3</p>
        <p class="text-red-500/60 text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] md:tracking-[0.3em] max-w-md mx-auto leading-loose px-4">
            NOT ASSOCIATED WITH, SPONSORED BY, OR APPROVED BY MOJANG AB OR MICROSOFT
        </p>
    </footer>

    <script>
        // Lógica del Loader y Animación de entrada
        window.addEventListener('load', () => {
            const progressBar = document.getElementById('progress-bar');
            const loader = document.getElementById('loader-wrapper');
            const mainContent = document.getElementById('main-content');
            const chunkCounter = document.querySelector('.chunk-counter');
            
            let width = 0;
            let chunks = 0;
            const totalChunks = 256;
            
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    
                    // Ocultar loader
                    loader.style.opacity = '0';
                    loader.style.visibility = 'hidden';
                    
                    // Mostrar contenido con delay
                    setTimeout(() => {
                        document.body.style.overflow = 'auto';
                        mainContent.classList.add('content-visible');
                        initCarousel(); // Inicializar el carrusel después de cargar
                    }, 400);
                } else {
                    // Incremento irregular tipo Minecraft
                    const increment = Math.random() * (width < 70 ? 8 : 4);
                    width += increment;
                    if (width > 100) width = 100;
                    
                    // Actualizar chunks
                    chunks = Math.floor((width / 100) * totalChunks);
                    
                    progressBar.style.width = width + '%';
                    chunkCounter.textContent = `Chunks: ${chunks}/${totalChunks}`;
                }
            }, 120);
        });

        // Lógica del Modal
        function toggleModal() {
            const modal = document.getElementById('modal');
            modal.classList.toggle('active');
            document.body.style.overflow = modal.classList.contains('active') ? 'hidden' : 'auto';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target == modal) toggleModal();
        }

        // Evitar clics en opciones deshabilitadas
        document.querySelectorAll('.option-disabled').forEach(option => {
            option.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                // Efecto visual de no disponible
                option.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    option.style.animation = '';
                }, 500);
            });
        });

        // Variables del carrusel infinito
        let currentSlide = 0;
        const totalSlides = 4; // Número real de imágenes
        let isAnimating = false;
        let isZoomed = false;
        let currentExpandedImage = 0;
        const slidesToShow = 7; // Número total de slides visibles (incluye clones)
        let carouselItems = [];

        // Inicializar carrusel infinito
        function initCarousel() {
            const carouselTrack = document.getElementById('carousel-track');
            
            // Limpiar contenido existente
            carouselTrack.innerHTML = '';
            carouselItems = [];
            
            // Crear slides
            const slideDescriptions = [
                "Interfaz principal moderna",
                "Gestor de contenido",
                "Descargar mods",
                "Configuración del launcher",
            ];
            
            // Crear array con todas las slides (repetidas para efecto infinito)
            const totalVisibleSlides = slidesToShow;
            const half = Math.floor(totalVisibleSlides / 2);
            
            // Crear slides (incluyendo clones para efecto infinito)
            for (let i = -half; i <= half; i++) {
                const slideIndex = ((currentSlide + i) % totalSlides + totalSlides) % totalSlides;
                const isActive = i === 0;
                const isAdjacent = Math.abs(i) === 1;
                
                const slide = createSlide(slideIndex, slideDescriptions[slideIndex], isActive, isAdjacent);
                carouselTrack.appendChild(slide);
                carouselItems.push({
                    element: slide,
                    index: slideIndex,
                    position: i
                });
            }
            
            // Actualizar contador
            updatePosition();
            
            // Centrar carrusel inicialmente
            centerCarousel();
        }

        // Crear una slide
        function createSlide(index, description, isActive = false, isAdjacent = false) {
            const slide = document.createElement('div');
            slide.className = 'carousel-slide';
            
            if (isActive) slide.classList.add('active');
            if (isAdjacent) slide.classList.add('adjacent');
            
            slide.innerHTML = `
                <img src="resources/cap${index + 1}.png" alt="Captura ${index + 1}" class="carousel-image">
                <div class="carousel-caption">
                    <h3 class="font-bold text-white">${description}</h3>
                    <p class="text-gray-300 text-sm mt-1">Captura ${index + 1}</p>
                </div>
            `;
            
            slide.onclick = () => {
                // Ir directamente a esta slide
                const targetIndex = index;
                const currentCenter = carouselItems.find(item => item.position === 0);
                const diff = targetIndex - currentCenter.index;
                
                if (diff !== 0) {
                    currentSlide = targetIndex;
                    updateCarousel(diff > 0 ? 'next' : 'prev');
                } else {
                    expandImage(index);
                }
            };
            
            return slide;
        }

        // Expandir imagen
        function expandImage(index) {
            currentExpandedImage = index;
            const imageModal = document.getElementById('image-modal');
            const expandedImage = document.getElementById('expanded-image');
            const modalCurrent = document.getElementById('modal-current');
            const modalTotal = document.getElementById('modal-total');
            
            expandedImage.src = `resources/cap${index + 1}.png`;
            expandedImage.classList.remove('zoomed');
            isZoomed = false;
            document.getElementById('zoom-icon').className = 'fas fa-search-plus';
            
            modalCurrent.textContent = index + 1;
            modalTotal.textContent = totalSlides;
            
            imageModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Cerrar modal de imagen
        function closeImageModal() {
            const imageModal = document.getElementById('image-modal');
            imageModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            isZoomed = false;
        }

        // Zoom imagen
        function zoomImage() {
            const expandedImage = document.getElementById('expanded-image');
            const zoomIcon = document.getElementById('zoom-icon');
            
            if (isZoomed) {
                expandedImage.classList.remove('zoomed');
                zoomIcon.className = 'fas fa-search-plus';
            } else {
                expandedImage.classList.add('zoomed');
                zoomIcon.className = 'fas fa-search-minus';
            }
            
            isZoomed = !isZoomed;
        }

        // Navegar entre imágenes expandidas
        function navigateExpanded(direction) {
            if (direction === 'next') {
                currentExpandedImage = (currentExpandedImage + 1) % totalSlides;
            } else {
                currentExpandedImage = (currentExpandedImage - 1 + totalSlides) % totalSlides;
            }
            
            expandImage(currentExpandedImage);
        }

        // Slide siguiente
        function nextSlide() {
            if (isAnimating) return;
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel('next');
        }

        // Slide anterior
        function prevSlide() {
            if (isAnimating) return;
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateCarousel('prev');
        }

        // Actualizar carrusel infinito
        function updateCarousel(direction) {
            if (isAnimating) return;
            
            isAnimating = true;
            const carouselTrack = document.getElementById('carousel-track');
            
            // Aplicar animación
            if (direction === 'next') {
                carouselTrack.style.transform = 'translateX(-100px)';
                carouselTrack.style.opacity = '0.7';
            } else {
                carouselTrack.style.transform = 'translateX(100px)';
                carouselTrack.style.opacity = '0.7';
            }
            
            setTimeout(() => {
                // Reconstruir carrusel con nuevas posiciones
                const totalVisibleSlides = slidesToShow;
                const half = Math.floor(totalVisibleSlides / 2);
                carouselTrack.innerHTML = '';
                carouselItems = [];
                
                // Crear nuevas slides con posiciones actualizadas
                for (let i = -half; i <= half; i++) {
                    let slideIndex;
                    if (direction === 'next') {
                        slideIndex = (currentSlide + i) % totalSlides;
                    } else {
                        slideIndex = (currentSlide - i) % totalSlides;
                    }
                    slideIndex = (slideIndex + totalSlides) % totalSlides;
                    
                    const isActive = i === 0;
                    const isAdjacent = Math.abs(i) === 1;
                    
                    const slide = createSlide(slideIndex, 
                        ["Interfaz principal moderna", "Gestor de contenido", "Descargar mods", "Configuración del launcher"][slideIndex], 
                        isActive, isAdjacent);
                    carouselTrack.appendChild(slide);
                    carouselItems.push({
                        element: slide,
                        index: slideIndex,
                        position: i
                    });
                }
                
                // Resetear transformación
                carouselTrack.style.transform = 'translateX(0)';
                carouselTrack.style.opacity = '1';
                
                // Actualizar posición
                updatePosition();
                
                // Resetear flag de animación
                setTimeout(() => {
                    isAnimating = false;
                }, 300);
            }, 300);
        }

        // Centrar carrusel visualmente
        function centerCarousel() {
            const carouselTrack = document.getElementById('carousel-track');
            const container = document.querySelector('.carousel-container');
            
            if (!carouselTrack || !container) return;
            
            const trackWidth = carouselTrack.scrollWidth;
            const containerWidth = container.clientWidth;
            const offset = (containerWidth - 300) / 2; // 300px es el ancho de cada slide
            
            carouselTrack.style.transform = `translateX(${offset}px)`;
        }

        // Actualizar indicador de posición
        function updatePosition() {
            const currentSlideEl = document.getElementById('current-slide');
            const totalSlidesEl = document.getElementById('total-slides');
            
            if (currentSlideEl) currentSlideEl.textContent = currentSlide + 1;
            if (totalSlidesEl) totalSlidesEl.textContent = totalSlides;
        }

        // Auto-play del carrusel
        let autoPlayInterval;
        
        function startAutoPlay() {
            stopAutoPlay();
            autoPlayInterval = setInterval(nextSlide, 4000);
        }
        
        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
            }
        }

        // Inicializar eventos
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.querySelector('.carousel-container');
            const imageModal = document.getElementById('image-modal');
            
            if (carousel) {
                carousel.addEventListener('mouseenter', stopAutoPlay);
                carousel.addEventListener('mouseleave', startAutoPlay);
                
                // Ajustar al redimensionar
                window.addEventListener('resize', centerCarousel);
            }
            
            // Eventos de teclado para navegación
            document.addEventListener('keydown', (e) => {
                const imageModal = document.getElementById('image-modal');
                
                if (imageModal.classList.contains('active')) {
                    if (e.key === 'Escape') closeImageModal();
                    if (e.key === 'ArrowLeft') navigateExpanded('prev');
                    if (e.key === 'ArrowRight') navigateExpanded('next');
                    if (e.key === 'z' || e.key === 'Z') zoomImage();
                } else {
                    if (e.key === 'ArrowLeft') prevSlide();
                    if (e.key === 'ArrowRight') nextSlide();
                }
            });
            
            // Navegación con clics en la imagen expandida
            imageModal.addEventListener('click', (e) => {
                const expandedImage = document.getElementById('expanded-image');
                const modalControls = document.querySelector('.modal-controls');
                
                // Si se hace clic en la imagen (no en los controles)
                if (e.target === expandedImage) {
                    zoomImage();
                }
                
                // Navegación lateral
                if (e.target === imageModal && !modalControls.contains(e.target)) {
                    const rect = expandedImage.getBoundingClientRect();
                    const clickX = e.clientX;
                    
                    if (clickX < rect.left + rect.width * 0.3) {
                        navigateExpanded('prev');
                    } else if (clickX > rect.left + rect.width * 0.7) {
                        navigateExpanded('next');
                    }
                }
            });
            
            // Iniciar auto-play
            startAutoPlay();
            
            // Centrar carrusel después de un breve delay
            setTimeout(centerCarousel, 100);
        });

        // Agregar animaciones CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
            
            /* Animación para el zoom */
            @keyframes zoomIn {
                from { transform: scale(1); }
                to { transform: scale(1.5); }
            }
            
            @keyframes zoomOut {
                from { transform: scale(1.5); }
                to { transform: scale(1); }
            }
            
            /* Animación suave para transición de slides */
            .carousel-track {
                transition: transform 0.3s ease, opacity 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>